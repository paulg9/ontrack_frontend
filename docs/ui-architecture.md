# UI Architecture Overview

## Navigation & Routes

- `/` → `DailyPlanView`: surface today’s rehab checklist with quick-complete controls and progress summary.
- `/exercise/:id` → `ExerciseDetailView`: deep dive into an exercise with cues, media, and proposal history.
- `/check-in` → `CheckInView`: capture daily pain/strain + completion data before starting plan.
- `/progress` → `ProgressView`: visualize streak, 7-day trend, and per-day stats; entry point for share link.
- `/reminders` → `RemindersView`: display feedback messages/reminders generated by the system.
- `/build-plan` → `BuildPlanView`: curate plan items from exercise library, add/remove exercises.
- `/proposals` → `ProposalReviewView`: review AI-generated detail proposals and accept or discard them.

## Component Tree (excerpt)

- `AppShell` (`App.vue`)
  - `GlobalNav` (inline) → toggles between views; highlights route state.
  - `router-view`
    - `DailyPlanView`
      - `PlanSummaryCard`
      - `PlanItemRow`
      - `CompletionFooter`
    - `ExerciseDetailView`
      - `ExerciseHeader`
      - `ExerciseMedia`
      - `ProposalTimeline`
    - `CheckInView`
      - `CheckInForm`
      - `CompletedExerciseSelector`
    - `ProgressView`
      - `StreakCard`
      - `TrendCharts`
      - `DayDetailDrawer`
    - `RemindersView`
      - `ReminderList`
    - `BuildPlanView`
      - `PlanEditor`
      - `ExerciseSearch`
      - `PlanItemForm`
    - `ProposalReviewView`
      - `ProposalCard`
      - `ProposalFilters`

## Shared State Strategy

- `useAuthStore`: minimal stub for now (username/userId); extend when backend auth is ready (`UserAccount.register`).
- `usePlanStore`: caches plan metadata, plan items, and completion state sourced from `RehabPlan` + `CheckIn` queries.
- `useExerciseStore`: caches exercise library, proposals, and handles AI proposal workflows.
- `useFeedbackStore`: stores streak metrics and reminder messages (`Feedback` concept endpoints).

All stores load data via `services/apiClient` helpers and preserve last-fetched timestamps for optimistic UI updates. Local storage can persist `userId` and `activePlanId` until formal auth is built.

## Backend Touchpoints

- **ExerciseLibrary**: list, add, update, deprecate exercises; fetch proposals; apply/discard details.
- **RehabPlan**: create plan, add/remove items; future archiving support.
- **CheckIn**: submit daily check-in, amend in place, query by owner/date.
- **Feedback**: recompute summary metrics, fetch streak/completion data, list reminder messages.
- **UserAccount**: register users, create share links for progress view.

Each view will define a clear loading lifecycle and surface API errors via toast/banner components (to be implemented under `components/feedback`).

## Next Steps

1. Scaffold Pinia stores (`src/stores/*`) with typed data contracts aligned to the API spec.
2. Build view scaffolds (templates + placeholder components) wired to stores.
3. Implement data fetching/composition functions incrementally, validating against the running backend.

